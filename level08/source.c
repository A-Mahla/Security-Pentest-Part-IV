# include <stdio.h>
# include <stdlib.h>
# include <string.h>
# include <sys/ptrace.h>


void	log_wrapper(FILE *file/*rbp-0x118*/, char *str/*rbp-0x120*/, char *av/*rbp-0x128*/)
{
	char	buffer[256]; // rbp-0x110

	strcpy(buffer, str);
	snprintf(buffer + strlen(buffer), 254 - strlen(buffer), av);
	buffer[strcspn(buffer, "\n")] = '\0';
	fprintf(file, "LOG: %s\n", buffer);
}


int		main(int ac, char **av, char **env)
{
	FILE *file;

	if (ac != 2)
		printf("Usage: %s filename\n", av[0]);
	if ((file = fopen("./backups/.log", "w")) == 0) {
		printf("ERROR: Failed to open %s\n", "./backups/.log");
		exit(1);
	}
	log_wrapper(file, "Starting back up: ", av[1]);
	if ((file = fopen(av[1], "w")) == 0) {
		printf("ERROR: Failed to open %s\n", av[1]);
		exit(1);
	}
	// main+281



	return 0;
}
